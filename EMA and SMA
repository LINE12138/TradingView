//@version=5
indicator(title="EMA and SMA with Smoothing", shorttitle="EMA&SMA Smooth", overlay=true, timeframe="", timeframe_gaps=true)

// Inputs for both EMA and SMA
lenEMA1 = input.int(9, minval=1, title="EMA Length")
lenSMA1 = input.int(20, minval=1, title="SMA Length")
lenEMA2 = input.int(9, minval=1, title="EMA Length")
lenSMA2 = input.int(20, minval=1, title="SMA Length")
lenEMA3 = input.int(9, minval=1, title="EMA Length")
lenSMA3 = input.int(20, minval=1, title="SMA Length")
lenEMA4 = input.int(9, minval=1, title="EMA Length")
lenSMA4 = input.int(20, minval=1, title="SMA Length")
lenEMA5 = input.int(9, minval=1, title="EMA Length")
lenSMA5 = input.int(20, minval=1, title="SMA Length")
lenEMA6 = input.int(9, minval=1, title="EMA Length")
lenSMA6 = input.int(20, minval=1, title="SMA Length")
lenEMA7 = input.int(9, minval=1, title="EMA Length")
lenSMA7 = input.int(20, minval=1, title="SMA Length")
lenEMA8 = input.int(9, minval=1, title="EMA Length")
lenSMA8 = input.int(20, minval=1, title="SMA Length")
lenEMA9 = input.int(9, minval=1, title="EMA Length")
lenSMA9 = input.int(20, minval=1, title="SMA Length")
lenEMA10 = input.int(9, minval=1, title="EMA Length")
lenSMA10 = input.int(20, minval=1, title="SMA Length")
src = input(close, title="Source")
offset = input.int(title="Offset", defval=0, minval=-500, maxval=500, display = display.data_window)

// Calculate EMA and SMA
ema1 = ta.ema(src, lenEMA1)
sma1 = ta.sma(src, lenSMA1)
ema2 = ta.ema(src, lenEMA2)
sma2 = ta.sma(src, lenSMA2)
ema3 = ta.ema(src, lenEMA3)
sma3 = ta.sma(src, lenSMA3)
ema4 = ta.ema(src, lenEMA4)
sma4 = ta.sma(src, lenSMA4)
ema5 = ta.ema(src, lenEMA5)
sma5 = ta.sma(src, lenSMA5)
ema6 = ta.ema(src, lenEMA6)
sma6 = ta.sma(src, lenSMA6)
ema7 = ta.ema(src, lenEMA7)
sma7 = ta.sma(src, lenSMA7)
ema8 = ta.ema(src, lenEMA8)
sma8 = ta.sma(src, lenSMA8)
ema9 = ta.ema(src, lenEMA9)
sma9 = ta.sma(src, lenSMA9)
ema10 = ta.ema(src, lenEMA10)
sma10 = ta.sma(src, lenSMA10)

// Function to calculate different moving averages
ma(source, length, type) =>
    switch type
        "SMA" => ta.sma(source, length)
        "EMA" => ta.ema(source, length)
        "SMMA (RMA)" => ta.rma(source, length)
        "WMA" => ta.wma(source, length)
        "VWMA" => ta.vwma(source, length)

// Inputs for smoothing lines
smoothingTypeEMA = input.string(title="EMA Smoothing Method", defval="SMA", options=["SMA", "EMA", "SMMA (RMA)", "WMA", "VWMA"], group="Smoothing", display = display.data_window)
smoothingLengthEMA = input.int(title="EMA Smoothing Length", defval=5, minval=1, maxval=100, group="Smoothing", display = display.data_window)
smoothingTypeSMA = input.string(title="SMA Smoothing Method", defval="SMA", options=["SMA", "EMA", "SMMA (RMA)", "WMA", "VWMA"], group="Smoothing", display = display.data_window)
smoothingLengthSMA = input.int(title="SMA Smoothing Length", defval=5, minval=1, maxval=100, group="Smoothing", display = display.data_window)

// Calculate smoothing lines
smoothingLineEMA1 = ma(ema1, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA1 = ma(sma1, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA2 = ma(ema2, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA2 = ma(sma2, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA3 = ma(ema3, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA3 = ma(sma3, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA4 = ma(ema4, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA4 = ma(sma4, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA5 = ma(ema5, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA5 = ma(sma5, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA6 = ma(ema1, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA6 = ma(sma1, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA7 = ma(ema2, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA7 = ma(sma2, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA8 = ma(ema3, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA8 = ma(sma3, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA9 = ma(ema4, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA9 = ma(sma4, smoothingLengthSMA, smoothingTypeSMA)
smoothingLineEMA10 = ma(ema5, smoothingLengthEMA, smoothingTypeEMA)
smoothingLineSMA10 = ma(sma5, smoothingLengthSMA, smoothingTypeSMA)

// Plot EMA, SMA, and their smoothing lines
plot(ema1, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA1, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma1, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA1, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema2, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA2, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma2, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA2, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema3, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA3, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma3, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA3, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema4, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA4, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma4, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA4, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema5, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA5, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma5, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA5, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema6, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA6, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma6, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA6, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema7, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA7, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma7, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA7, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema8, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA8, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma8, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA8, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema9, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA9, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma9, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA9, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
plot(ema10, color=color.blue, title="EMA", offset=offset)
plot(smoothingLineEMA10, title="EMA Smoothing", color=color.red, linewidth=2, offset=offset)
plot(sma10, color=color.green, title="SMA", offset=offset)
plot(smoothingLineSMA10, title="SMA Smoothing", color=color.orange, linewidth=2, offset=offset)
